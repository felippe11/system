{% extends "base.html" %}

{% block title %}Dashboard do Superadmin{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">Painel do Superadmin</h2>

    <div class="card border-0 shadow-sm mb-4">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
            <strong>Senha dos resultados do Feedback Aberto</strong>
            {% if configuracao and configuracao.senha_feedback_aberto_hash %}
                <span class="badge bg-success">Senha definida</span>
            {% else %}
                <span class="badge bg-warning text-dark">Senha não definida</span>
            {% endif %}
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('dashboard_routes.atualizar_senha_feedback_aberto') }}">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="senha_feedback_aberto" class="form-label">Nova senha</label>
                        <input type="password" class="form-control" id="senha_feedback_aberto" name="senha_feedback_aberto" required>
                    </div>
                    <div class="col-md-6">
                        <label for="confirmar_senha_feedback_aberto" class="form-label">Confirmar senha</label>
                        <input type="password" class="form-control" id="confirmar_senha_feedback_aberto" name="confirmar_senha_feedback_aberto" required>
                    </div>
                </div>
                <div class="mt-3">
                    <button class="btn btn-primary" type="submit">Salvar senha</button>
                    <small class="text-muted ms-2">Essa senha será exigida para visualizar resultados do feedback aberto.</small>
                </div>
            </form>
        </div>
    </div>

    <h3>Gerenciar Clientes</h3>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
            <tr>
                <td>{{ cliente.id }}</td>
                <td>{{ cliente.nome }}</td>
                <td>{{ cliente.email }}</td>
                <td>
                    {% if cliente.ativo %}
                        <span class="badge bg-success">Ativo</span>
                    {% else %}
                        <span class="badge bg-danger">Desativado</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('config_cliente_routes.toggle_cliente', cliente_id=cliente.id) }}" class="btn btn-sm {% if cliente.ativo %}btn-danger{% else %}btn-success{% endif %}">
                        {% if cliente.ativo %}Desativar{% else %}Ativar{% endif %}
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
