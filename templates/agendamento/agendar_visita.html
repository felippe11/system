{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Agendar Visita</h2>
    <p class="text-muted">
        Você está agendando como
        {{ 'Professor' if current_user.tipo == 'professor' else 'Cliente' }}.
    </p>
    <p><strong>Data:</strong> {{ horario.data }}</p>
    <p><strong>Horário:</strong> {{ horario.horario_inicio }} - {{ horario.horario_fim }}</p>
    <p><strong>Vagas Disponíveis:</strong> {{ horario.vagas_disponiveis }}</p>

    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        {% if current_user.tipo == 'professor' %}
        <input type="hidden" name="professor_id" value="{{ current_user.id }}">
        {% elif current_user.tipo == 'cliente' %}
        <input type="hidden" name="cliente_id" value="{{ current_user.id }}">
        {% endif %}
        <div class="mb-3">
            <label class="form-label">Nome da Escola</label>
            <input type="text" name="escola_nome" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Turma</label>
            <input type="text" name="turma" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Quantidade de Alunos</label>
            <input type="number" name="quantidade_alunos" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success">Confirmar Agendamento</button>
    </form>
</div>

<div id="chat-ajuda" class="border rounded p-3 bg-light" style="display:none; position:fixed; bottom:20px; right:20px; max-width:300px; z-index:1000;">
    <strong>Precisa de ajuda?</strong>
    <p class="mb-0">Após concluir o agendamento, acesse <strong>Meus Agendamentos</strong> para inserir nome e CPF dos alunos e baixar o comprovante.</p>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/agendamento_chat.js') }}"></script>
{% endblock %}
